summary: Prepayment Invoice based loans
details:
  - description: Order Confirmation 
    mermaid: >-
      sequenceDiagram
        title  Order Fulfillment
        participant Borrower Platform (BAP)
        participant Lender Platform (BPP)
        Lender Platform (BPP)->>Borrower Platform (BAP):on_confirm
        Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
        Borrower Platform (BAP)->>Lender Platform (BPP): update-Request
        Lender Platform (BPP)-->>Borrower Platform (BAP):ACK
        Lender Platform (BPP)->>Borrower Platform (BAP):on_update - Update request Loan Account
        Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
        Lender Platform (BPP)->>Borrower Platform (BAP):on_update - Update success Loan Account
        Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
  - description: Fulfillment  
    mermaid: >-
      sequenceDiagram
        title Order Fulfillment
        participant Borrower Platform (BAP)
        participant Lender Platform (BPP)
        Borrower Platform (BAP)->>Lender Platform (BPP): status-Request loan application status
        Lender Platform (BPP)-->>Borrower Platform (BAP):ACK
        Lender Platform (BPP)->>Borrower Platform (BAP):on_status - Provide loan application status
        Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
references: if any
steps:         
  - summary: Validates the borrower's loan application and approves the Invoice Based Loan.
    api: on_confirm
    details:
      - description: Provider platform verifies the application and grants approval for the Invoice Based Loan. Upon successful validation, the lender proceeds with the loan disbursement process.
        mermaid: >-
          sequenceDiagram
            title  Order Fulfillment
            participant Borrower Platform (BAP)
            participant Lender Platform (BPP)
            rect rgb(191, 223, 255)
            Lender Platform (BPP)->>Borrower Platform (BAP):on_confirm
            Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
            end
            Borrower Platform (BAP)->>Lender Platform (BPP): update-Request
            Lender Platform (BPP)-->>Borrower Platform (BAP):ACK
            Lender Platform (BPP)->>Borrower Platform (BAP):on_update - Update request Loan Account
            Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
            Lender Platform (BPP)->>Borrower Platform (BAP):on_update - Update success Loan Account
            Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
    reference: if any
    example:
      value:
        $ref: "../../examples/invoice-based-loans/on_confirm/on_confirm-request.yaml" 
 #update
  - summary: The borrower (BAP) sends the update request by sending the order ID.
    api: update
    details:
      - description: The borrower (BAP) sends the update request by sending the order ID to be updated along with the object in the order to be updated as update_target.
        mermaid: >-
          sequenceDiagram
            title  Order Fulfillment
            participant Borrower Platform (BAP)
            participant Lender Platform (BPP)
            Lender Platform (BPP)->>Borrower Platform (BAP):on_confirm
            Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
            rect rgb(191, 223, 255)
            Borrower Platform (BAP)->>Lender Platform (BPP): update-Request
            Lender Platform (BPP)-->>Borrower Platform (BAP):ACK
            end
            Lender Platform (BPP)->>Borrower Platform (BAP):on_update - Update request Loan Account
            Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
            Lender Platform (BPP)->>Borrower Platform (BAP):on_update - Update success Loan Account
            Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
    reference: if any
    example:
      value:
        $ref: "../../examples/invoice-based-loans/update/update-request-prepayment.yaml" 
  - summary: The borrower (BAP) sends the update request by sending the order ID.
    api: on_update
    details:
      - description: The borrower (BAP) sends the update request by sending the order ID to be updated along with the object in the order to be updated as update_target.
        mermaid: >-
          sequenceDiagram
            title  Order Fulfillment
            participant Borrower Platform (BAP)
            participant Lender Platform (BPP)
            Lender Platform (BPP)->>Borrower Platform (BAP):on_confirm
            Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
            Borrower Platform (BAP)->>Lender Platform (BPP): update-Request
            Lender Platform (BPP)-->>Borrower Platform (BAP):ACK
            rect rgb(191, 223, 255)
            Lender Platform (BPP)->>Borrower Platform (BAP):on_update - Update request Loan Account
            Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
            end
            Lender Platform (BPP)->>Borrower Platform (BAP):on_update - Update success Loan Account
            Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
    reference: if any
    example:
      value:
        $ref: "../../examples/invoice-based-loans/on_update/on_update-request-prepayment.yaml" 

  - summary: The borrower (BAP) sends the update request by sending the order ID.
    api: on_update
    details:
      - description: The borrower (BAP) sends the update request by sending the order ID to be updated along with the object in the order to be updated as update_target.
        mermaid: >-
          sequenceDiagram
            title Order Fulfillment
            participant Borrower Platform (BAP)
            participant Lender Platform (BPP)
            Lender Platform (BPP)->>Borrower Platform (BAP):on_confirm
             Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
            Borrower Platform (BAP)->>Lender Platform (BPP): update-Request
            Lender Platform (BPP)-->>Borrower Platform (BAP):ACK
            Lender Platform (BPP)->>Borrower Platform (BAP):on_update - Update request Loan Account
            Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
            rect rgb(191, 223, 255)
            Lender Platform (BPP)->>Borrower Platform (BAP):on_update - Update success Loan Account
            Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
            end
    reference: if any
    example:
      value:
        $ref: "../../examples/invoice-based-loans/on_update/on_update-success-prepayment.yaml"           
          


  - summary: Consumer platform request the latest updates on their Invoice Based Loan.
    api: status
    details:
      - description: The consumer platform request the provider platform seeking the most recent information about the status of their Invoice Based Loan.
        mermaid: >-
          sequenceDiagram
            title  Order Fulfillment
            participant Borrower Platform (BAP)
            participant Lender Platform (BPP)
            rect rgb(191, 223, 255)
            Borrower Platform (BAP)->>Lender Platform (BPP): status-Request loan application status
            Lender Platform (BPP)-->>Borrower Platform (BAP):ACK
            end
            Lender Platform (BPP)->>Borrower Platform (BAP):on_status - Provide loan application status
            Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
    reference: if any
    example:
      value:
        $ref: "../../examples/invoice-based-loans/status/status-request.yaml" 
  - summary: Lender provides the borrower with real-time updates on their Invoice Based Loan after receiving the prepayment.
    api: on_status
    details:
      - description: When the lender receives the Equated Monthly Installments (EMI) from the borrower, the on_status API delivers prompt updates to the borrower. These updates include the current status of the Invoice Based Loan, ensuring transparency and keeping the borrower informed throughout the loan repayment process.
        mermaid: &onStatus >-
          sequenceDiagram
            title  Order Fulfillment
            participant Borrower Platform (BAP)
            participant Lender Platform (BPP)
            Borrower Platform (BAP)->>Lender Platform (BPP): status-Request loan application status
            Lender Platform (BPP)-->>Borrower Platform (BAP):ACK
            rect rgb(191, 223, 255)
            Lender Platform (BPP)->>Borrower Platform (BAP):on_status - Provide loan application status
            Borrower Platform (BAP)-->>Lender Platform (BPP): ACK
            end
    example:
      value:
        $ref: "../../examples/invoice-based-loans/on_status/on_status-request-prepayment.yaml"            
